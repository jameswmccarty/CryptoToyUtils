<html>
<body>
<script>

rundecrypt();

function decrypt(src, rv, ov) {
	var rails = rv;
	var offset = ov;

	var result = new Array(src.length);
	var k = 0;
	for (var i = 0; i < rails; i++) {
	for (var j = 0; j < src.length; j++)
	if (railnumber(j, rails, offset) == i)
	result[j] = src[k++];
}

	console.log(rv, ov, result.join("")+result.join(""), result.reverse().join("")+result.reverse().join(""));
	//console.log(result.join(""))
}

function encrypt(src, rv, ov) {
	var rails = rv
	var offset = ov

	var result = '';
	for (var i = 0; i < rails; i++) {
		for (var j = 0; j < src.length; j++)
			if (railnumber(j, rails, offset) == i)
				result += src[j];
	}

	console.log(rv, ov, result+result, result.split("").reverse().join("")+result.split("").reverse().join(""));
}


function railnumber(pos, rails, offset) {
	pos = (pos + offset) % (rails * 2 - 2);
	if (pos < rails)
		return pos;
	else
		return 2 * rails - pos - 2;
}

function rot(s) {
	return s.slice(1) + s.slice(0,1);
}

function rundecrypt() {

var src = "DNETLEEDHESWLXFTAAX" // DEFENDTHEEASTWALLXX

	for (var k=0; k<src.length+1; k++) {
		console.log("Rotation", k)
		for (var i = 2; i < src.length; i++) {
			for (var j = 0; j < 2*src.length; j++) {
				decrypt(src, i, j);
				//encrypt(src, i, j);
			}
		}
		src = rot(src)
	}
}

</script>
</body>
</html>

